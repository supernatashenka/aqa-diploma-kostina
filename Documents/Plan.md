# План автоматизации тестирования 

##### Валидные данные:

- номер карты: 16 цифр.
- месяц: 2 цифры в диапазоне 01-12, но не ранее текущего месяца текущего года.
- год: 2 цифры (не ранее текущего года и не позже 5 лет с текущего года).
- владелец: буквы латинского алфавита, имя и фамилия.
- CVC: 3 цифры.

Карты, представленные для тестирования (data.json):

+ Одобренная карта :  4444 4444 4444 4441, status APPROVED 
+ Отклоненная карта :  4444 4444 4444 4442, status DECLINED



##  Перечень автоматизируемых сценариев

### UI

**Happy path:**

***1. Оплата с помощью одобренной карты, поля заполнены валидными значениями, путем нажатия кнопки "Купить"***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Заполнить форму заявки валидными данными одобренной карты ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: отображено уведомление "Успешно. Операция одобрена Банком". в БД появилась запись со статусом APPROVED

***2. Оплата с помощью одобренной карты, поля заполнены валидными значениями, путем нажатия кнопки "Купить в кредит"***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Заполнить форму заявки полностью валидными  одобренной данными карты ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: отображено уведомление "Успешно. Операция одобрена Банком". в БД появилась запись со статусом APPROVED



**Sad path:**

***3. Оплата с помощью отклоненной карты, поля заполнены валидными значениями, путем нажатия кнопки "Купить"***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Заполнить форму заявки валидными данными отклоненной карты ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**:  Отображено уведомление: "Ошибка! Банк отказал в проведении операции".
В БД появилась запись со статусом DECLINED.


***4. Оплата с помощью отклоненной карты, поля заполнены валидными значениями, путем нажатия кнопки "Купить в кредит"***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Заполнить форму заявки полностью валидными данными отклоненной карты ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Отображено уведомление: "Ошибка! Банк отказал в проведении операции".
В БД появилась запись со статусом DECLINED.




***5.  Отправка пустой формы покупки тура путем нажатия кнопки "Купить"***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Оставить поля ввода данных карты пустыми ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Все поля подсвечены красным цветом, сообщения об ошибке: «Неверный формат», «Поле обязательно для заполнения».

***6.  Отправка пустой формы покупки тура путем нажатия кнопки "Купить в кредит"***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Оставить поля ввода данных карты пустыми ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Все поля подсвечены красным цветом, сообщения об ошибке: «Неверный формат», «Поле обязательно для заполнения».


***7.  Отправка формы покупки тура с невалидными значениями номера карты, путем нажатия кнопки "Купить"***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Заполнить поле "Номер карты" невалидными данными, например 8 цифр. Остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "Номер карты" подсвечено красным цветом, сообщения об ошибке: «Неверный формат».

***8.  Отправка формы покупки тура с невалидными значениями номера карты, путем нажатия кнопки "Купить в кредит"***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Заполнить поле "Номер карты" невалидными данными, например 8 цифр. Остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "Номер карты" подсвечено красным цветом, сообщения об ошибке: «Неверный формат».


***9.  Оплата по несуществующей карте, путем нажатия кнопки "Купить"***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Заполнить поле "Номер карты"  данными несуществующей карты 5555 5555 5555 5555. Остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции".

***10.  Оплата по несуществующей карте, путем нажатия кнопки "Купить в кредит"***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Заполнить поле "Номер карты"  данными несуществующей карты 5555 5555 5555 5555. Остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции"



***11.  Отправка формы покупки тура с пустым полем "Номер карты", остальные поля заполнены валидными значениями, путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Оставить пустым поле "Номер карты". Остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "Номер карты" подсвечено красным цветом, под полем "Номер карты "сообщение об ошибке "Поле обязательно для заполнения".

***12. Отправка формы покупки тура с пустым полем "Номер карты", остальные поля заполнены валидными значениями, путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Оставить пустым поле "Номер карты". Остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "Номер карты" подсвечено красным цветом, под полем "Номер карты "сообщение об ошибке "Поле обязательно для заполнения".


***13. Оплата по карте с истекшим сроком действия (Месяц), путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, указать предыдущий месяц, текущий год, остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: под полем Месяц сообщение об ошибке: "Неверно указан срок действия карты".

***14. Оплата по карте с истекшим сроком действия (Месяц), путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, указать предыдущий месяц, текущий год, остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: под полем Месяц сообщение об ошибке: "Неверно указан срок действия карты".



***15. Оплата по карте с истекшим сроком действия (Год), путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, указать предыдущий год, остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: под полем "Год" сообщение об ошибке "Неверно указан срок действия карты".

***16. Оплата по карте с истекшим сроком действия (Год), путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, указать предыдущий год, остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: под полем "Год" сообщение об ошибке "Неверно указан срок действия карты".

***17. Оплата по карте с указанием года более 5ти лет от текущего, путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Указать год +6 от текущего, остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: под полем "Год" сообщение об ошибке "Неверно указан срок действия карты".

***18. О Оплата по карте с указанием года более 5ти лет от текущего, путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Указать год +6 от текущего, остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: под полем "Год" сообщение об ошибке "Неверно указан срок действия карты".



***19. Оплата по карте, где в поле указан невалидный месяц(00), путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, указать в поле "Месяц"  значение 00, остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: под полем Месяц сообщение об ошибке "Неверно указан срок действия карты".

***20. Оплата по карте, где в поле указан невалидный месяц (00), путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, указать в поле "Месяц"  значение 00, остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: под полем Месяц сообщение об ошибке "Неверно указан срок действия карты".

***21. Оплата по карте, где в поле указан невалидный месяц (13), путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, указать в поле "Месяц"  значение "13", остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: под полем Месяц сообщение об ошибке "Неверно указан срок действия карты".

***22. Оплата по карте, где в поле указан невалидный месяц(13), путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, указать в поле "Месяц"  значение "13", остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: под полем Месяц сообщение об ошибке "Неверно указан срок действия карты".


***23. Оплата по карте с пустым полем "Месяц", путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, оставить пустым поле "Месяц", остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "Месяц" подсвечено красным цветом, под полем "Месяц"сообщение об ошибке:"Поле обязательно для заполнения".

***24. Оплата по карте с пустым полем "Месяц", путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, оставить пустым поле "Месяц", остальные поля заполнить валидными данными;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "Месяц" подсвечено красным цветом, под полем "Месяц"сообщение об ошибке:"Поле обязательно для заполнения".


***25. Оплата по карте с пустым полем "Год", путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, оставить пустым поле "Год", остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "Год" подсвечено красным цветом, под полем "Год"сообщение об ошибке:"Поле обязательно для заполнения".

***26. Оплата по карте с пустым полем "Год", путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Зполнить поле "Номер карты" значением 4444 4444 4444 4441, оставить пустым поле "Год", остальные поля заполнить валидными данными;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "Год" подсвечено красным цветом, под полем "Год"сообщение об ошибке:"Поле обязательно для заполнения".


***27. Оплата по карте, где в поле "Владелец" заполнено кирилицей, путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Заполнить поле "Владелец" кирилицей, остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле "Владелец" подсвечено красным, под полем "Владелец" появилось сообщение об ошибке: "Неверный формат".

***28. Оплата по карте, где поле "Владелец" заполнено кирилицей, путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Заполнить поле "Владелец" кирилицей, остальные поля заполнить валидными данными  ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: оле "Владелец" подсвечено красным, под полем "Владелец" появилось сообщение об ошибке: "Неверный формат".


***29. Оплата по карте, где в поле "Владелец" указаны  только имя, путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Заполнить поле "Владелец" указать только имя (IVAN), остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле "Владелец" подсвечено красным, под полем "Владелец" появилось сообщение об ошибке: "Неверный формат".

***30. Оплата по карте, где в поле "Владелец" указаны  только имя, путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Заполнить поле "Владелец" указать только имя (IVAN), остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле "Владелец" подсвечено красным, под полем "Владелец" появилось сообщение об ошибке: "Неверный формат".

***31. Оплата по карте с пустым полем "Владелец", путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2.Оставить пустым поле "Владелец", остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "Владелец" подсвечено красным цветом, под полем "Владелец" сообщение об ошибке:"Поле обязательно для заполнения".

***32. Оплата по карте с пустым полем "Владелец", путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Оставить пустым поле "Владелец", остальные поля заполнить валидными данными;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "Владелец" подсвечено красным цветом, под полем "Владелец" сообщение об ошибке:"Поле обязательно для заполнения".


***33. Оплата по карте, где в поле "CVV" указаны невалидные данные, путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2. Заполнить поле "CVV"  невалидными данными (ввести 2 цифры), остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле "CVV" подсвечено красным, под полем "CVV" появилось сообщение об ошибке: "Неверный формат".

***34. ООплата по карте, где в поле "CVV" указаны невалидные данные, путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Заполнить поле "CVV"  невалидными данными (вветси 2 цифры), остальные поля заполнить валидными данными  ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле "CVV" подсвечено красным, под полем "CVV" появилось сообщение об ошибке: "Неверный формат".


***35. Оплата по карте с пустым полем "CVV", путем нажатия кнопки "Купить***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить";
>2.Оставить пустым поле "CVV", остальные поля заполнить валидными данными ;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "CVV" подсвечено красным цветом, под полем "CVV" сообщение об ошибке:"Поле обязательно для заполнения".

***36. Оплата по карте с пустым полем "CVV", путем нажатия кнопки "Купить в кредит***

>Шаги по воспроизведению:
>1. На главной странице сервиса нажать на кнопку "Купить в кредит";
>2. Оставить пустым поле "CVV", остальные поля заполнить валидными данными;
>3. Нажать на кнопку "Продолжить";


**Ожидаемый результат**: Поле ввода "CVV" подсвечено красным цветом, под полем "CVV" сообщение об ошибке:"Поле обязательно для заполнения".


### API

Необходимо проверить, что при обращении к сервису через API ответ сервера и запись в БД будет соответствовать ожидаемому.
 
 * Предусловия:
 
Данные для карты со статусом APPROVED: Номер карты - 4444444444444441, Месяц - 03, Год - 23, Владелец - Petrov Ivan, CVC/CVV - 123

Данные для карты со статусом DECLINED: Номер карты - 4444444444444442, Месяц - 04, Год - 23, Владелец - Petrov Ivan, CVC/CVV - 123

- Отправка запроса "купить" с валидным body и карты со статусом APPROVED
Ожидаемый результат: ответ сервера - код 200, запись в БД со статусом APPROVED.

- Отправка запроса "купить" с валидным body и карты со статусом DECLINED	
Ожидаемый результат: ответ сервера - код 200, запись в БД со статусом DECLINED.

- Отправка запроса "купить в кредит" с валидным body и карты со статусом APPROVED
Ожидаемый результат: ответ сервера - код 200, запись в БД со статусом APPROVED

- Оправка запроса "купить в кредит" с валидным body и карты со статусом DECLINED	
Ожидаемый результат: ответ сервера - код 200, запись в БД со статусом  DECLINED.


## Перечень используемых инструментов

- **IntelliJ IDEA**

 Редактор кода, необходимый для реализации автотестов, интеграции с БД, системой контроля версий.

- **Java 11**

Язык программирования на котором будет написан проект.

- **Gradle**

Система сборки проекта. Удобство заключается быстротой сборки в условиях, где подключается множество библиотек.

- **Git**

система контроля версий  Git позволит публиковать проект в удаленный репозиторий, создавать коммиты на разных этапах работы, а также при необходимости возвращаться к той или иной точке в работе над проектом. 

- **JUnit-5**

Тестовым фреймворком в нашем случае будет JUnit-5, т.к. это один из наиболее популярный тестовых фреймворков на данный момент и обладает всем нужным функционалом и аннотациями.

- **Selenide**

Фреймворк для тестирования веб-приложений.

- **Lombok**

Lombok — позволяет сократить время написания кода и количество строк кода за 
счет автоматически генерируемых конструкторов, getter'ов/setter'ов и т.п.

- **JavaFaker**

Плагин, позволяющий генерировать тестовые данные — имя, пароль и т.п. 
Позволит решить проблему, когда необходимо где-то брать тестовые данные, чтобы не хардкодить их в методы.

- **Docker**

Через Docker мы будем использовать те приложения, установка и использование которых "в натуральном виде" может повлечь за собой некоторые риски в процессе автоматизации
и требует определенных навыков. Через Docker мы развертываем **СУБД MySQL и PostgreSQL**, т.к. заявлено, что сервис покупки туров поддерживает именно эти две СУБД, а также **Node.js** для того, что запускать симуляцию сервисов банка, написанных с помощью Node.js.

- **Allure**

Для просмотра детального отчета о прохождении тестов будем использовать Allure, т.к. в нем заложен значительно больший функционал по сравнению со стандартным отчетом Gradle.

##Перечень и описание возможных рисков при автоматизации

- отсуствие спецификаций

- Технические сложности с настройкой Docker-compose.yml и SUT — возможные проблемы с "поднятием" БД, SUT не запускается и т.п.;

- Сложности с подключением тестов через 2 типа БД (MySQL и PostgreSQL);

## Интервальная оценка с учётом рисков 

- Планирование тестирвоания — 4 часа;
- Подготовка к тестированию - 12 часов;
- Написание кода  — 88 часов;
- Составление баг-репортов  — 24 часа;
- Подготовка отчета о результатах прогона тестов — 8 часов;
- Подготовка  отчета — 8 часов;

## План сдачи работ

- Готовность авто-тестов — через 100 рабочих часов после согласования тест-плана;
- Подготовка отчетов по итогам прогона тестов — через 2 рабочих дня после прогона тестов;
- Подготовка комплексного отчета по итогам автоматизации — через 2 рабочих дня после отчетов по прогону и написания баг-репортов.




